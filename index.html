<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style></style>
</head>
<body>
  <svg></svg>
<script src="https://d3js.org/d3.v7.min.js"></script>
<script>

    function dragstarted(event, d) {
  if (!event.active) simulation.alphaTarget(0.3).restart();
  d.fx = d.x;
  d.fy = d.y;
}

function dragged(event, d) {
  d.fx = event.x;
  d.fy = event.y;
}

function dragended(event, d) {
  if (!event.active) simulation.alphaTarget(0);
  d.fx = null;
  d.fy = null;
}

let width = 800,
    height = 800;

    let svg = d3
    .select("svg")
    .attr("width", width)
    .attr("height", height)
    .style("display", "block")
    .style("margin", "auto");

let data = [];
for (let i=0; i < 20; i++) {
    let obj = {};
    obj.x=width/2;
    obj.y=height/2;
    obj.class = Math.floor(Math.random()*5);
    data.push(obj);

}

let colorScale=d3.scaleOrdinal()
.domain([0,1,2,3,4])
.range(["steelblue","pink","orange","blue","purple"])

let node = svg.append("g")
  .attr("id", "nodes")
  .selectAll("circle")
  .data(data)
  .enter()
  .append("circle")
    .attr("r", 25)
    .style("fill", d=> colorScale(d.class))
    .call(d3.drag()
        .on("start",dragstarted)
        .on("drag",dragged)
        .on("end",dragended)
    );
                
// let simulation = d3.forceSimulation()
//     .nodes(data)
//     .force("x", d3.forceX().strength(1.0).x( width / 2 ))
//     .force("y", d3.forceY().strength(2.0).y( height /2 ))
//     .force("charge", d3.forceManyBody().strength(-30))
//     .force("collide", d3.forceCollide().strength(0.1).radius(30))
//     .on("tick", d => {
//         node
//         .attr("cx", d => d.x)
//         .attr("cy", d => d.y);

let simulation = d3.forceSimulation()
    .nodes(data)
    .force("charge", d3.forceManyBody().strength(10))
    .force("collide", d3.forceCollide().strength(1).radius(10))
    .force("r", d3.forceRadial(200, width /2, height /2).strength(0.1))
    .alphaMin(0.1)
    .on("tick", d => {
        node
        .attr("cx", d => d.x)
        .attr("cy", d => d.y);



     });
            
</script>
</body>
</html>
          